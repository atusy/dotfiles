#!/bin/sh

set -eu

MISE_INSTALL_PATH="${MISE_INSTALL_PATH:-${HOME}/.local/bin/mise}"
MISE="$( command -v mise || true )"

if [ -z "$MISE" ] || [ "$MISE" = "$0" ]; then
  curl https://mise.jdx.dev/mise-latest-linux-x64 > "$MISE_INSTALL_PATH"
  chmod +x "$MISE_INSTALL_PATH"
fi

if [ -z "${MISE_INSTALL_ONLY:-}" ]; then
  "$MISE_INSTALL_PATH" "$@"
fi
